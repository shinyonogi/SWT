<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="#{statistic.title}">Monatsstatistik</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>

    <nav th:include="navigation :: navigation"></nav>

    <div class="container mt-3 mb-3">
        <h4 class="mt-2" th:text="#{statistic.title.page}">Statistik für April 2021</h4>

        <div class="row">
            <form class="form-inline w-100 mt-3 mb-3" method="post" th:action="@{/admin/statistic}">
                <div class="col-lg-4 text-center">
                    <label class="control-label" for="init" th:text="#{statistic.init}"></label>
                    <select class="custom-select" id="init" name="init">
                        <option th:each="month : ${months}" th:selected="${initDate.equals(month)}" th:text="${#temporals.format(month, 'MMMM yyyy')}"></option>
                    </select>
                </div>
                <div class="col-lg-4 text-center">
                    <label class="control-label" for="compare" th:text="#{statistic.compare}"></label>
                    <select class="custom-select" id="compare" name="compare">
                        <option th:each="month : ${months}" th:selected="${compareDate.equals(month)}" th:text="${#temporals.format(month, 'MMMM yyyy')}"></option>
                    </select>
                </div>
                <div class="col-lg-4">
                    <button type="submit" class="btn btn-primary" th:text="#{statistic.submit}"></button>
                </div>
            </form>
        </div>
        <table class="table table-hover">
            <thead class="thead-light">
            <tr>
                <th scope="col" th:text="#{statistic.supplier}">Lieferant</th>
                <th scope="col" th:text="#{statistic.total} + ' ' + ${#temporals.format(initDate, 'MMMM yyyy')}">Einkaufsbetrag</th>
                <th scope="col" th:text="#{statistic.difference} + ' ' + ${#temporals.format(compareDate, 'MMMM yyyy')}">Differenz Vormonat</th>
            </tr>
            </thead>
            <tbody>
            <tr class="table-light" th:each="entry : ${statistic}" th:with="diff = ${entry.getDifference()}">
                <td th:text="${entry.getSupplier().getName()}">Müller Möbel</td>
                <td th:text="${entry.getInitProfit().query(T(furnitureshop.FurnitureShop).MONETARY_QUERY)}">123.456,01€</td>
                <td th:if="${diff.isNegative()}" class="text-danger" th:text="${diff.query(T(furnitureshop.FurnitureShop).MONETARY_QUERY)}">+5.034,01€</td>
                <td th:if="${diff.isPositive()}" class="text-success" th:text="'+' + ${diff.query(T(furnitureshop.FurnitureShop).MONETARY_QUERY)}">+5.034,01€</td>
                <td th:if="${diff.isZero()}" class="text-dark" th:text="${diff.query(T(furnitureshop.FurnitureShop).MONETARY_QUERY)}">+5.034,01€</td>
            </tr>
            </tbody>
        </table>
    </div>

</body>
</html> 